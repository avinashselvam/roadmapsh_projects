<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <form id="register_form">
            <label>register</label>
            <label for="register_username">username</label>
            <input id="register_username" type="text"/>
            <label for="register_password">password</label>
            <input id="register_password" type="text"/>
            <button id="register_button" onclick="register_user()">register</button>
            <p id="resigter_response"></p>
        </form>

        <form id="login_form">
            <label>login</label>
            <label for="login_username">username</label>
            <input id="login_username" type="text"/>
            <label for="login_password">password</label>
            <input id="login_password" type="password"/>
            <button id="login_button" onclick="login_user()">log in</button>
            <p id="login_response"></p>
        </form>
    </body>
    <script>
        const register_button = document.getElementById("register_button")
        const login_button = document.getElementById("login_button")

        const register_username = document.getElementById("register_username")
        const login_username = document.getElementById("login_username")

        const register_password = document.getElementById("register_password")
        const login_password = document.getElementById("login_password")

        const register_user = () => {
            event.preventDefault();
            username = register_username.value
            password = register_password.value

            console.log(username, password)

            fetch("http://127.0.0.1:5000/users",
                {
                    method: "PUT",
                    body: JSON.stringify({
                        "username": username,
                        "password": password
                    }),
                    headers: {
                        "Content-type": "application/json; charset=UTF-8"
                    }
                })
                .then(res => res.json())
                .then(console.log)
        }

        const login_user = () => {
            event.preventDefault();
            username = login_username.value
            password = login_password.value
            fetch("http://127.0.0.1:5000/login",
                {
                    method: "POST",
                    body: JSON.stringify({
                        "username": username,
                        "password": password
                    }),
                    headers: {
                        "Content-type": "application/json; charset=UTF-8"
                    }
                })
                .then(res => res.json())
                .then(console.log)
        }

        

    </script>
</html>